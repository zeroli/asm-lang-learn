this example doesn't work!
it will crash at `ungetwc` function call in printf call
need investigation
